# mlit-analyzer アプリケーション利用マニュアル

本リポジトリには、国土交通省などが公開している各種データを可視化・分析するための6つのStreamlitアプリケーションが含まれています。
各アプリケーションは、以下のコマンドで起動できます。

```bash
streamlit run apps/アプリケーションのファイル名.py
```

---

## 1. 避難所 & 人口メッシュビューア (`app_evac.py`)
全国の避難所データと、1kmメッシュの人口推計データを組み合わせて分析する総合ビューアです。

*   **🏥 避難所分析タブ:**
    *   地図上に避難所の位置をマッピングします。
    *   サイドバーから都道府県や施設種別によるフィルタリングが可能です。
    *   避難所をクリックすると、施設の詳細（名称、住所、収容人数）やGoogleマップへのリンクが表示されます。
    *   「TSPルート表示」にチェックを入れると、Sierpinski空間充填曲線による避難所を巡回する近似ルートを描画します。
*   **📊 1kmメッシュ人口分析タブ:**
    *   1kmメッシュごとの推計人口をヒートマップで可視化します（対数スケール対応）。
    *   サイドバーの「Geospatial Search」で中心点と半径を指定して検索すると、特定の範囲内の総人口、避難率に基づく想定避難者数が計算され、必要な救援物資の量が推計されます。
    *   「避難所割当を実行」をオンにすると、範囲内の各メッシュを最も近い避難所に自動で割り当て、避難所ごとの割当人口やキャパシティの占有率を計算・表示します。

---

## 2. 地価公示ビューア (`app_land_price.py`)
2025年の地価公示データを地図上で閲覧できるアプリケーションです。

*   **主な機能:**
    *   全国の標準地の公示価格（円/m²）を地点としてマッピングします。
    *   サイドバーの「Use Log Scale」で色のスケールを対数に変更可能であり、地価の変動幅が大きい場合でもグラデーションによる比較がしやすくなっています。
    *   地点にホバーすると、該当の公示価格、住所、市区町村、用途区分、および最寄駅と駅からの距離が表示されます。
    *   ページ下部では、表示されているデータの中で公示価格が高い順のトップ50地点をリスト表示します。

---

## 3. 物流拠点ビューア (`app_logistics.py`)
国土数値情報の物流拠点データを可視化するアプリケーションです。

*   **主な機能:**
    *   トラックターミナル、倉庫、卸売市場、航空貨物ターミナルなどの物流拠点を地図上にプロットし、施設種別ごとに色分けして表示します。
    *   **Geospatial Search:** 特定の緯度・経度と検索半径（km）を用いた空間検索機能があり、指定エリア内の物流拠点をピックアップできます。
    *   都道府県や施設種別のチェックリストを用いて、表示する拠点を細かく絞り込めます。さらに、マップ右側の凡例で各色の意味を確認可能です。
    *   施設をホバーすると、施設名称と種類、住所が表示されます。

---

## 4. 海上旅客航路ビューア (`app_marine.py`)
2016年の海上旅客航路網（フェリー等）のネットワークを可視化します。

*   **主な機能:**
    *   各港間の航路を地図上の線（PathLayer）として描画します。
    *   **表示のカスタマイズ（サイドバー）:** `Line Width`スライダーで線の太さ、`Opacity`で透過度を調整できます。
    *   **コロプレス表示:** 『総トン数』『航行距離』『頻度』『運搬可能旅客数』などの指標をドロップダウン（Color by）から選ぶと、その数値の大きさに応じて航路がグラデーションで色分けされます。
    *   航路にホバーすると、起点・終点の港名、航行距離、および選択した指標の具体的な値がツールチップで確認できます。

---

## 5. 1kmメッシュ推計人口ビューア (`app_mesh.py`)
1kmメッシュ単位の将来人口推計データを時系列や詳細な年齢階層別で分析できるアプリケーションです。

*   **主な機能:**
    *   人口データを対象年次（例: 2030年 男女計総数など）の切り替えにより可視化します（Log Scale対応）。
    *   **Geospatial Search と物資推計機能:**
        *   特定の検索範囲（緯度、経度、半径）を指定して「Search」ボタンを押すと、その円内の総人口を算出します。
        *   想定避難率（%）を入力すると、避難者数を算出し、水・食料・衛生用品などの「必要な救援物資の推定重量」をテーブルで提示します（CSVダウンロード機能付き）。
    *   指定範囲内の対象年の人口の「年齢階層別推移」を棒グラフで表示するため、高齢化等の地域特性を一目で把握可能です。

---

## 6. 駅乗降客数ビューア (`app_passengers.py`)
各鉄道事業者の駅の乗降客数データを可視化するアプリケーションです。

*   **主な機能:**
    *   駅の位置をプロットし、乗降客数の多さを円の色の濃さで表現します。表示には対数スケールのターボ（Turbo）カラーマップが用いられ、コントラスト高く乗降客数の多寡を判別できます。
    *   **設定（サイドバー）:**
        *   利用する乗降客数のデータカラムを選択できます。
        *   スライダー（Point Radius Scale）を用いて、マップ上の円のサイズを一括して調整できるため、俯瞰時・ズーム時の見やすさをコントロールできます。
    *   地点をホバーすると、駅名、路線、運営会社名、および乗降客数値が表示されます。
    *   画面下部には、乗降客数の多い駅トップ10がリストアップされます。
