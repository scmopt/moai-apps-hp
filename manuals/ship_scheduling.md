# 船舶スケジューリング最適化システム ユーザーマニュアル

## 1. アプリケーション概要

本アプリケーションは、複数の港間における商品の輸送計画を最適化するためのツールです。船舶の積載能力、各港の荷役能力、在庫状況、および移動コストを総合的に判断し、最も効率的で収益性の高い航行スケジュールを算出します。

## 2. 設定項目（入力データ）

### 2.1 全般設定

計画全体に関わる基礎情報を定義します。

| 項目名 | 説明 | 入力上の注意 |
| --- | --- | --- |
| 総計画期間数 | 計画の対象となる時間区分の総数 | 正の整数で入力 |
| 商品の種類数 | 輸送対象となる商品のカテゴリ数 | 正の整数で入力 |
| 積込地域数 | 荷積みを行う地理的なエリアの数 | 正の整数で入力 |
| 荷下地域数 | 荷降ろしを行う地理的なエリアの数 | 正の整数で入力 |
| 船舶区分数 | 特性の異なる船舶グループ（クラス）の数 | 正の整数で入力 |
| 定期船配置数 | 船舶区分ごとの定期船の隻数リスト | 各区分に対応する数値 |
| 1期間あたりの時間数 | 1単位時間が何時間に相当するか | 整数（例：24時間など） |
| スポット市場単価 | 自社船以外で輸送する場合の商品単位コスト | 数値（小数点可） |
| スポット割引係数 | スポット取引に適用される割引率 | 0.0〜1.0の範囲 |
| 早期完了報酬 | 予定より早く作業を終えた際の期間報酬 | 数値 |

### 2.2 船舶マスター情報

使用する船舶のスペックと個別の状態を定義します。

| 項目名 | 説明 | 入力上の注意 |
| --- | --- | --- |
| 船舶区分名 | 船舶グループの名称（大型、中型など） | 文字列 |
| 積載容量 | その船舶が一度に運べる最大量 | 正の整数 |
| 平均航行速度 | 航行時の平均速度（ノット単位） | 数値（小数点可） |
| 移動コスト | 定期船が1km移動する際にかかる費用 | 数値（小数点可） |
| 空荷時割引率 | 荷物を積まずに移動する際のコスト軽減率 | 0.0〜1.0の範囲 |
| 船舶名 | 個別の船舶を特定するための名称 | 文字列 |
| 船舶種別 | 「定期船」か「スポット船」かの区分 | 指定の種別を選択 |
| 初期積載量 | 計画開始時に船内に積まれている在庫量 | 0以上の整数 |
| 開始地点（港） | 計画開始時に船舶が位置している港 | 登録済みの港名 |
| 稼働開始時期 | 船舶が利用可能になる最初の時間区分 | 0以上の整数 |

### 2.3 港湾インフラ情報

積込港および荷下港の仕様と在庫状況を定義します。

| 項目名 | 説明 | 入力上の注意 |
| --- | --- | --- |
| 港名 | 積込または荷下を行う港の名称 | 文字列 |
| 港湾利用料 | 港を利用する際にかかる固定の手数料 | 正の整数 |
| 接岸可能数（バース数） | 同時に停泊して作業できる船舶の数 | 正の整数 |
| 最大荷役量 | 1期間内にその港で扱える最大量 | 正の整数 |
| 最小荷役量 | 1期間内に最低限扱うべき荷役量 | 正の整数 |
| 最大保管容量 | 港のサイロやタンク等の最大在庫収容量 | 正の整数 |
| 初期在庫量 | 計画開始時の港の在庫量 | 0以上の整数 |
| 期間別生産・消費量 | 各時間区分ごとの生産量（積込港）または消費量（荷下港） | 各期間に対応する数値リスト |
| 期間別収益単価 | 荷下港において商品を卸した際の単位あたり収益 | 各期間に対応する数値リスト |

### 2.4 移動・距離設定

拠点間の物理的な繋がりを定義します。

| 項目名 | 説明 | 入力上の注意 |
| --- | --- | --- |
| 拠点間距離 | 港から港への物理的な距離（km） | 正の数値 |
| 標準移動期間 | 船舶区分ごとの港間移動に要する期間数 | 船舶区分・拠点別に設定 |

---

## 3. 適用されるルール（制約条件）

最適化計算にあたり、以下のビジネスルールが厳守されます。

* **積載制限**: 船舶の積載量は、設定された「積載容量」をいかなる時も超えてはなりません。
* **接岸制限**: 各港で同時に荷役作業を行える船舶の数は、その港の「接岸可能数（バース数）」以下に制限されます。
* **在庫維持**: 港の在庫量は「最大保管容量」を超えてはならず、また欠品（在庫マイナス）が発生しないように計画を立てる必要があります。
* **荷役能力**: 1期間あたりの積込・荷下量は、各港の「最大荷役量」および「最小荷役量」の範囲内でなければなりません。
* **運用可能時間**: 船舶は「稼働開始時期」より前の時間区分では移動や荷役を行うことはできません。
* **移動時間**: 港間の移動には、距離と船舶速度に基づいた所定の期間を要します。

---

## 4. 出力結果

計算の結果、以下の情報が最適なスケジュールとして提示されます。

1. **船舶運航スケジュール**: どの船舶が、いつ、どの港を訪れ、どの商品をどれだけ荷役するかの詳細タイムライン。
2. **港湾在庫推移**: 計画期間全体を通じた、各港の在庫レベルの変動グラフ。
3. **収益・コスト内訳**:
* 総収益（荷下による収益、早期完了報酬など）
* 総コスト（航行コスト、港湾利用料、スポット利用料など）
* 最終的な純利益の最大化結果

## 5. アプリケーション操作ガイド

### サイドバー設定
* **Load Sample Data**: 事前定義されたサンプルデータを読み込みます。
* **Time Limit (seconds)**: ソルバーの計算時間制限。
* **Solve**: 最適化計算を実行します。

### 結果表示
* **Objective (Total Profit)**: 最適化された総利益を表示。
* **Time-Space Network**: 縦軸に港、横軸に時間をとった船舶の運航ダイヤグラム。
* **Inventory Profiles**:
    * **Port Inventory**: 各港の在庫推移グラフ。
    * **Vessel Inventory**: 各船舶内の在庫推移グラフ。